{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet OrdersComponent = class OrdersComponent {\n  constructor(authService, changeDetectorRef // Inject ChangeDetectorRef\n  ) {\n    this.authService = authService;\n    this.changeDetectorRef = changeDetectorRef;\n  }\n  ngOnInit() {\n    this.reloadComponent();\n  }\n  reloadComponent() {\n    this.orders = this.authService.loadOrders();\n    let currentUser = JSON.parse(localStorage.getItem('currentUser'));\n    //   if (currentUser && currentUser._id) {\n    //     let userId = currentUser._id;\n    //         this.orders = this.orders.filter((orderItem => orderItem.user._id === userId));\n    // }\n  }\n\n  calculateTotal(order) {\n    return order.items.reduce((total, item) => total + parseFloat(item.price), 0);\n  }\n  deleteOrder(order) {\n    this.orders = this.orders.filter(orderItem => orderItem._id !== order._id);\n    this.authService.deleteOrder(order);\n    this.reloadComponent();\n    this.changeDetectorRef.detectChanges(); // Trigger change detection\n  }\n};\n\nOrdersComponent = __decorate([Component({\n  selector: 'app-orders',\n  templateUrl: './orders.component.html',\n  styleUrls: ['./orders.component.css']\n})], OrdersComponent);\nexport { OrdersComponent };","map":{"version":3,"names":["Component","OrdersComponent","constructor","authService","changeDetectorRef","ngOnInit","reloadComponent","orders","loadOrders","currentUser","JSON","parse","localStorage","getItem","calculateTotal","order","items","reduce","total","item","parseFloat","price","deleteOrder","filter","orderItem","_id","detectChanges","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\Akash Bahri\\Documents\\Husky\\INFO 6150 WEB\\tryangular\\angular12-ws\\angular-demo1\\src\\app\\orders\\orders.component.ts"],"sourcesContent":["import { Component, OnInit, ChangeDetectorRef } from '@angular/core';\r\nimport { AuthService } from '../auth.service';\r\n\r\n@Component({\r\n  selector: 'app-orders',\r\n  templateUrl: './orders.component.html',\r\n  styleUrls: ['./orders.component.css']\r\n})\r\nexport class OrdersComponent implements OnInit {\r\n  orders: any[];\r\n\r\n  constructor(\r\n    private authService: AuthService, \r\n    private changeDetectorRef: ChangeDetectorRef // Inject ChangeDetectorRef\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.reloadComponent();\r\n  }\r\n\r\n  reloadComponent() {\r\n    this.orders = this.authService.loadOrders();\r\n    let currentUser = JSON.parse(localStorage.getItem('currentUser') as string);\r\n  //   if (currentUser && currentUser._id) {\r\n  //     let userId = currentUser._id;\r\n      \r\n  //         this.orders = this.orders.filter((orderItem => orderItem.user._id === userId));\r\n       \r\n  // }\r\n}\r\n\r\n  calculateTotal(order: any) {\r\n    return order.items.reduce((total: number, item: any) => total + parseFloat(item.price), 0);\r\n  }\r\n\r\n  deleteOrder(order: any) {\r\n    this.orders = this.orders.filter(orderItem => orderItem._id !== order._id);\r\n    \r\n    this.authService.deleteOrder(order);\r\n    this.reloadComponent();\r\n    \r\n    this.changeDetectorRef.detectChanges(); // Trigger change detection\r\n  }\r\n}\r\n"],"mappings":";AAAA,SAASA,SAAS,QAAmC,eAAe;AAQ7D,IAAMC,eAAe,GAArB,MAAMA,eAAe;EAG1BC,YACUC,WAAwB,EACxBC,iBAAoC,CAAC;EAAA,E;IADrC,KAAAD,WAAW,GAAXA,WAAW;IACX,KAAAC,iBAAiB,GAAjBA,iBAAiB;EACxB;EAEHC,QAAQA,CAAA;IACN,IAAI,CAACC,eAAe,EAAE;EACxB;EAEAA,eAAeA,CAAA;IACb,IAAI,CAACC,MAAM,GAAG,IAAI,CAACJ,WAAW,CAACK,UAAU,EAAE;IAC3C,IAAIC,WAAW,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAW,CAAC;IAC7E;IACA;IAEA;IAEA;EACF;;EAEEC,cAAcA,CAACC,KAAU;IACvB,OAAOA,KAAK,CAACC,KAAK,CAACC,MAAM,CAAC,CAACC,KAAa,EAAEC,IAAS,KAAKD,KAAK,GAAGE,UAAU,CAACD,IAAI,CAACE,KAAK,CAAC,EAAE,CAAC,CAAC;EAC5F;EAEAC,WAAWA,CAACP,KAAU;IACpB,IAAI,CAACR,MAAM,GAAG,IAAI,CAACA,MAAM,CAACgB,MAAM,CAACC,SAAS,IAAIA,SAAS,CAACC,GAAG,KAAKV,KAAK,CAACU,GAAG,CAAC;IAE1E,IAAI,CAACtB,WAAW,CAACmB,WAAW,CAACP,KAAK,CAAC;IACnC,IAAI,CAACT,eAAe,EAAE;IAEtB,IAAI,CAACF,iBAAiB,CAACsB,aAAa,EAAE,CAAC,CAAC;EAC1C;CACD;;AAnCYzB,eAAe,GAAA0B,UAAA,EAL3B3B,SAAS,CAAC;EACT4B,QAAQ,EAAE,YAAY;EACtBC,WAAW,EAAE,yBAAyB;EACtCC,SAAS,EAAE,CAAC,wBAAwB;CACrC,CAAC,C,EACW7B,eAAe,CAmC3B"},"metadata":{},"sourceType":"module","externalDependencies":[]}